<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_950909_car_park.Check_location</api_name>
        <caller_access/>
        <client_callable>true</client_callable>
        <description/>
        <name>Check_location</name>
        <script><![CDATA[var Check_location = Class.create();
Check_location.prototype = Object.extendsObject(global.AbstractAjaxProcessor, {

    query_location: function() {
        var id = this.getParameter('id');
        var num_car = this.getParameter('num_car');
        var location = this.getParameter('location');
        var st = new GlideDateTime(this.getParameter('st'));
        var ed = new GlideDateTime(this.getParameter('end'));

        //format
//         var Date_st = st.getDate().getByFormat("yyyy-MM-dd");
//         var Time_st = st.getTime().getByFormat("HH:mm:ss");
//         var Date_ed = ed.getDate().getByFormat("yyyy-MM-dd");
//         var Time_ed = ed.getDate().getByFormat("HH:mm:ss");

        //Query
        var table = new GlideRecord('x_950909_car_park_car_parking');
        table.addQuery('u_id_card', '=', id);
        table.addQuery('u_number_car', '=', num_car);
        //         table.addQuery('u_location', location);
        //         table.addEncodedQuery("u_start_dtBETWEENjavascript:gs.dateGenerate('" + st + "')@javascript:gs.dateGenerate('" + ed + "')^u_end_dtBETWEENjavascript:gs.dateGenerate('" + st + "')@javascript:gs.dateGenerate('" + ed + "')");
        table.addEncodedQuery("u_start_dt<=javascript:gs.dateGenerate('" + ed + "')^u_end_dt>=javascript:gs.dateGenerate('" + st + "')");
		
        table.query();

        while (table.next()) {
            return table.getRowCount();
        }
    },

    type: 'Check_location'
});]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-09-06 07:57:01</sys_created_on>
        <sys_id>4b97ea6e4705311021f49128436d4386</sys_id>
        <sys_mod_count>25</sys_mod_count>
        <sys_name>Check_location</sys_name>
        <sys_package display_value="Car parking reservation" source="x_950909_car_park">083c1ad84741311021f49128436d4349</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Car parking reservation">083c1ad84741311021f49128436d4349</sys_scope>
        <sys_update_name>sys_script_include_4b97ea6e4705311021f49128436d4386</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-09-06 13:39:17</sys_updated_on>
    </sys_script_include>
</record_update>
